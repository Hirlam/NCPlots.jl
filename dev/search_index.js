var documenterSearchIndex = {"docs":
[{"location":"references/","page":"API reference","title":"API reference","text":"NCPlots.plot\nNCPlots.plotvar!\nNCPlots.addequator!\nNCPlots.addmeridian!\nNCPlots.lonlat2xyz\nNCPlots.lonpadview\nNCPlots.isperiodiclon","category":"page"},{"location":"references/#NCPlots.plot","page":"API reference","title":"NCPlots.plot","text":"fig,ax,plt = plot(var)\n\nPlots variable var on the sphere. Returns fig ax and plt. \n\n\n\n\n\n","category":"function"},{"location":"references/#NCPlots.plotvar!","page":"API reference","title":"NCPlots.plotvar!","text":"plotvar!(ax,var)\n\nPlots variables var into axis ax\n\n\n\n\n\n","category":"function"},{"location":"references/#NCPlots.addequator!","page":"API reference","title":"NCPlots.addequator!","text":"addequator!(ax; lat=0, kwargs...)\n\nAdds equator to axis ax\n\n\n\n\n\n","category":"function"},{"location":"references/#NCPlots.addmeridian!","page":"API reference","title":"NCPlots.addmeridian!","text":"addmeridian!(ax; lon=0, kwargs...)\n\nAdds meridian at lon=0 to axis ax\n\n\n\n\n\n","category":"function"},{"location":"references/#NCPlots.lonlat2xyz","page":"API reference","title":"NCPlots.lonlat2xyz","text":"x,y,z = lonlat2xyz(lons,lats)\n\nConvert lons, lats to x,y,z coordinates. \n\nlons, lats can be either Vector or Matrix (for irregular grids in LAM models )\n\n\n\n\n\n","category":"function"},{"location":"references/#NCPlots.lonpadview","page":"API reference","title":"NCPlots.lonpadview","text":"lonpadview(data::Matrix) \nlonpadview(data::Vector)\n\nReturns a view of data with the first row (assumed to be the longitude dimensions repeated at the end. \n\n\n\n\n\n","category":"function"},{"location":"references/#NCPlots.isperiodiclon","page":"API reference","title":"NCPlots.isperiodiclon","text":"isperiodiclon(lons)\n\nReturns true if lons is a Vector and lons is periodic. false if lons is a Matrix (irregular grid LAM model)\n\n\n\n\n\n","category":"function"},{"location":"animations/#Animations","page":"Animations","title":"Animations","text":"","category":"section"},{"location":"animations/","page":"Animations","title":"Animations","text":"Pass in an Observable ","category":"page"},{"location":"animations/","page":"Animations","title":"Animations","text":"t = Observables(1)\nfield = @lift(view(ds(time=$t)[\"pv\"]) \nfig,ax,plt = plot(field)","category":"page"},{"location":"animations/","page":"Animations","title":"Animations","text":"Then animate like ","category":"page"},{"location":"animations/","page":"Animations","title":"Animations","text":"for i in 1:100\n   t[]=i \n   sleep(0.01)\nend \n","category":"page"},{"location":"animations/#Recording-animations","page":"Animations","title":"Recording animations","text":"","category":"section"},{"location":"keyboard/#Keyboard-controls","page":"Keyboard control","title":"Keyboard controls","text":"","category":"section"},{"location":"keyboard/","page":"Keyboard control","title":"Keyboard control","text":"See Makie Camera3D documentation","category":"page"},{"location":"keyboard/#Translations","page":"Keyboard control","title":"Translations","text":"","category":"section"},{"location":"keyboard/","page":"Keyboard control","title":"Keyboard control","text":"Key Translation\nr Up\nf Down\na Left\nd Right\nw Forward\ns Backward\nPgUp Strech.  Moving eyepostion away from lookat.\nPgDn Contract. moving eyeposition towards lookat.","category":"page"},{"location":"keyboard/#Pan-tilt-roll","page":"Keyboard control","title":"Pan tilt roll","text":"","category":"section"},{"location":"keyboard/","page":"Keyboard control","title":"Keyboard control","text":"Key Pan, Tilt, Roll\nj Pan left\nl Pan right\ni Tilt up\nk Tilt down\ne Roll clockwise\nq Roll counter","category":"page"},{"location":"keyboard/#Zoom","page":"Keyboard control","title":"Zoom","text":"","category":"section"},{"location":"keyboard/","page":"Keyboard control","title":"Keyboard control","text":"Key Zoom\nu zoom in  (enlarge, via fov).\no zoom out (shrink, via fov).","category":"page"},{"location":"cds/#getting_data","page":"Getting data","title":"Getting data","text":"","category":"section"},{"location":"cds/#ERA5","page":"Getting data","title":"ERA5","text":"","category":"section"},{"location":"cds/","page":"Getting data","title":"Getting data","text":"ERA5 data can be downloaded from the Climate Data Store. Requires an account","category":"page"},{"location":"cds/","page":"Getting data","title":"Getting data","text":"Complete ERA5 global atmospheric reanalysis\nERA5 hourly data on pressure levels from 1940 to present,\nERA5 hourly data on single levels from 1940 to present\nERA5-Land hourly data from 1950 to present","category":"page"},{"location":"cds/","page":"Getting data","title":"Getting data","text":"Click download data in one of the datasets to get an overview of the available data. After making a selection click Show API request which will give a Python script to download the data. You can also use CDSAPI.jl julia package","category":"page"},{"location":"cds/","page":"Getting data","title":"Getting data","text":"using CDSAPI \n\nyear = 2020\nmonth = 4       # use e.g. 1:12 for all months\nday = 1:10      # use e.g. 1:31 for all days in month\ntimes = 0:1:23  # use 0:1:23 for all hours in day(s)\n\n# variable = \"mean_sea_level_pressure\"  # \"surface_pressure\"\nvariable = [\"geopotential\", \"pv\"]\n\n\nCDSAPI.retrieve(\n    \"reanalysis-era5-pressure-levels\",\n    Dict(    \n        \"product_type\" =>  \"reanalysis\",\n        \"format\" => \"netcdf\",\n        \"variable\" => variable,\n        \"pressure_level\" => \"500\",\n        \"time\"  =>  lpad.(times,2,\"0\") .*\":00\",    # 00:00 00:06 00:12 etc \n        \"day\"  => lpad.(day,2,\"0\"),            # 01 02 03 etc ,\n        \"month\" => lpad.(month,2,\"0\"),         # 01 02 03 etc\n        \"year\" => \"$year\",\n       #   \"area\" => area  # leave  out for global fields\n    ),\n    \"era5_pressure_levels_$(join(variable,\"_\")).nc\"\n)\n","category":"page"},{"location":"cds/#Arctic-regional-reanalysis","page":"Getting data","title":"Arctic regional reanalysis","text":"","category":"section"},{"location":"cds/","page":"Getting data","title":"Getting data","text":"Arctic regional reanalysis (CARRA) can be download from the climate data store ","category":"page"},{"location":"cds/","page":"Getting data","title":"Getting data","text":"Artic regional reanalysis on pressure levels from 1991 to present\nArctic regional reanalysis on model levels from 1991 to present","category":"page"},{"location":"cds/#MetCoop","page":"Getting data","title":"MetCoop","text":"","category":"section"},{"location":"cds/","page":"Getting data","title":"Getting data","text":"Harmonie Arome NetCDF file from Met Norway:  todo","category":"page"},{"location":"#NCPlots","page":"Home","title":"NCPlots","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"NCPlots is a Julia package for plotting (meteorological) data on the sphere. Datasets should conform to the CF convention and implement the CommonDataModel.jl interface like NCDatasets and GRIBDatasets  ","category":"page"},{"location":"","page":"Home","title":"Home","text":"See here for some examples  See Getting data how to obtain ERA5 and CARRA data. ","category":"page"},{"location":"#Installation","page":"Home","title":"Installation","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"NCPlots is in the Harmonie registry.  Add the Harmonie registry (hit ] in the Julia REPL to enter package mode).  ","category":"page"},{"location":"","page":"Home","title":"Home","text":"pkg> registry add https://github.com/Hirlam/HarmonieRegistry.git","category":"page"},{"location":"","page":"Home","title":"Home","text":"Then install NCPlots with ","category":"page"},{"location":"","page":"Home","title":"Home","text":"pkg> add NCPlots ","category":"page"},{"location":"#Data-requirements","page":"Home","title":"Data requirements","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Variables should only have dimensions longitude and latitude. If there are additional dimensions create a view e.g. for a dataset ds that contains a variable pv where pv in addition to longitude and latitude also has dimension  time do ","category":"page"},{"location":"","page":"Home","title":"Home","text":"julia> using NCPlots, GLMakie, NCDatasets\njulia> ds = Dataset(\"era5_pressure_levels_geopotential_pv.nc\")\njulia> pv = view(ds,time=1)[\"pv\"]\npv (1440 × 721)\n  Datatype:    Union{Missing, Float64}\n  Dimensions:  longitude × latitude\n  Attributes:\n   scale_factor         = 1.814417934243432e-9\n   add_offset           = 4.442749788103522e-5\n   _FillValue           = -32767\n   missing_value        = -32767\n   units                = K m**2 kg**-1 s**-1\n   long_name            = Potential vorticity","category":"page"},{"location":"","page":"Home","title":"Home","text":"Or to control which time is shown  ","category":"page"},{"location":"","page":"Home","title":"Home","text":"t = Observable(1)\npv = @lift(view(ds,time=$t)[\"pv\"])\nplot(pv) ","category":"page"},{"location":"","page":"Home","title":"Home","text":"The plot will update automatically with  ","category":"page"},{"location":"","page":"Home","title":"Home","text":"t[]=2","category":"page"},{"location":"","page":"Home","title":"Home","text":"to make a basic animation you can do","category":"page"},{"location":"","page":"Home","title":"Home","text":"for ti = 1:100\n   t[]=ti\n   sleep(0.01)\nend ","category":"page"},{"location":"example/#Examples","page":"Examples","title":"Examples","text":"","category":"section"},{"location":"example/","page":"Examples","title":"Examples","text":"These examples use NetCDF files from the docs/src/assets directory. For the animations download larger datasets as exlained in the Getting data section. ","category":"page"},{"location":"example/#ERA5-potential-vorticity","page":"Examples","title":"ERA5 potential vorticity","text":"","category":"section"},{"location":"example/","page":"Examples","title":"Examples","text":"using NCPlots, GLMakie, NCDatasets\nds = Dataset(\"assets/era5_pv_z_500hPa.nc\")\npv = view(ds, time=1)[\"pv\"]\nfig, ax, plt = plot(pv, colormap=:RdBu, colorrange=(-3e-6,3e-6))\nsave(\"assets/era5_pv_docs.png\", fig) # hide","category":"page"},{"location":"example/","page":"Examples","title":"Examples","text":"(Image: ) ","category":"page"},{"location":"example/#Control-light","page":"Examples","title":"Control light","text":"","category":"section"},{"location":"example/","page":"Examples","title":"Examples","text":"Access properties specular diffuse etc. in the returned plt.","category":"page"},{"location":"example/","page":"Examples","title":"Examples","text":"(Image: )","category":"page"},{"location":"example/","page":"Examples","title":"Examples","text":"Explain how to update camera, change lightposition  ","category":"page"},{"location":"example/#Mutliple-plots-in-single-axis","page":"Examples","title":"Mutliple plots in single axis","text":"","category":"section"},{"location":"example/","page":"Examples","title":"Examples","text":"See docs/plotlogo.jl for an example ","category":"page"},{"location":"example/","page":"Examples","title":"Examples","text":"(Image: )","category":"page"},{"location":"example/#Plot-on-geopotential-height-surface","page":"Examples","title":"Plot on geopotential height surface","text":"","category":"section"},{"location":"example/","page":"Examples","title":"Examples","text":"Multiply x, y, z by geopotential height ","category":"page"},{"location":"example/","page":"Examples","title":"Examples","text":"(Image: )","category":"page"},{"location":"example/#Plot-on-orography","page":"Examples","title":"Plot on orography","text":"","category":"section"},{"location":"example/","page":"Examples","title":"Examples","text":"See plot geopotential height. Color show temperature increments from data assimilation  ","category":"page"},{"location":"example/","page":"Examples","title":"Examples","text":"(Image: ) ","category":"page"},{"location":"example/#CARRA","page":"Examples","title":"CARRA","text":"","category":"section"},{"location":"example/","page":"Examples","title":"Examples","text":"(Image: ) (Image: )","category":"page"},{"location":"example/#Metcoop","page":"Examples","title":"Metcoop","text":"","category":"section"},{"location":"example/","page":"Examples","title":"Examples","text":"archive=\"/lustre/storeB/immutable/archive/projects/metproduction/MEPS/\"\nds = Dataset(\"$archive/2023/10/01/meps_det_2_5km_20231001T00Z.nc\")\nfield = view(ds,hybrid=65,time=1)[\"air_temperature_ml\"]\nplot(field)","category":"page"},{"location":"example/","page":"Examples","title":"Examples","text":"(Image: ) ","category":"page"},{"location":"example/#Animated-plots","page":"Examples","title":"Animated plots","text":"","category":"section"},{"location":"example/","page":"Examples","title":"Examples","text":"To make these animations use Observables and @lift to lift the dataset view e.g.","category":"page"},{"location":"example/","page":"Examples","title":"Examples","text":"ds = Dataset(...) \nt = Observable(1)\npv = @lift(view(ds,time=$t)[\"pv\"]) \nplot(pv) ","category":"page"},{"location":"example/","page":"Examples","title":"Examples","text":"Updating t wil update the plot e.g.","category":"page"},{"location":"example/","page":"Examples","title":"Examples","text":"for i=1:100\n   t[] = i\n   sleep(0.01)\nend ","category":"page"},{"location":"example/","page":"Examples","title":"Examples","text":"(Image: )","category":"page"},{"location":"example/","page":"Examples","title":"Examples","text":"You can access eyeposition in ax.scene and update in the for loop  ","category":"page"},{"location":"example/","page":"Examples","title":"Examples","text":"(Image: )","category":"page"}]
}
